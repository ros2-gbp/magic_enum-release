From 126d040e81061044c543c04ce7226682fe525078 Mon Sep 17 00:00:00 2001
From: Tim Clephas <tim.clephas@nobleo.nl>
Date: Tue, 25 Nov 2025 06:48:08 +0100
Subject: [PATCH] Add legacy shim header <magic_enum.hpp> for Jazzy.

---
 CMakeLists.txt         | 7 +++++++
 include/magic_enum.hpp | 4 ++++
 2 files changed, 11 insertions(+)
 create mode 100644 include/magic_enum.hpp

diff --git a/CMakeLists.txt b/CMakeLists.txt
index cf41320..06628f6 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -86,6 +86,13 @@ if(MAGIC_ENUM_OPT_INSTALL)
     PATTERN "${PROJECT_INCLUDE_HEADER_PATTERN}"
   )
 
+  # Install legacy shim header (packaging-added) for backward compatibility.
+  # Provides <magic_enum.hpp> forwarding to <magic_enum/magic_enum.hpp>.
+  install(
+    FILES "${PROJECT_SOURCE_DIR}/include/${PROJECT_NAME}.hpp"
+    DESTINATION "${CMAKE_INSTALL_INCLUDEDIR}"
+  )
+
   set(CPACK_PACKAGE_NAME "${PROJECT_NAME}")
   set(CPACK_PACKAGE_DESCRIPTION "${PROJECT_DESCRIPTION}")
   set(CPACK_DEBIAN_PACKAGE_ARCHITECTURE "all")
diff --git a/include/magic_enum.hpp b/include/magic_enum.hpp
new file mode 100644
index 0000000..31ae46e
--- /dev/null
+++ b/include/magic_enum.hpp
@@ -0,0 +1,4 @@
+#ifndef MAGIC_ENUM_LEGACY_ROOT_HEADER
+#define MAGIC_ENUM_LEGACY_ROOT_HEADER
+#include <magic_enum/magic_enum.hpp>
+#endif
-- 
2.43.0

